LoginSNFHelper:
  Environment: Settings
  Roles:
    - Role: localiOS
      App: NeverAlone      
  Actions:
    # Open the Never Alone app and click on Provision Device button.
    - Type: click
      Strategy: class_chain
      Id: $PAGE.seniors_app_login.provision_device_btn$
    # Fill in the email and password fields with credentials.
    - Type: send_keys
      Strategy: class_chain
      Id: $PAGE.seniors_app_login.email_input$
      Value: $AND_CLI_facility_devices_user1$
    - Type: send_keys
      Strategy: class_chain
      Id: $PAGE.seniors_app_login.password_input$
      Value: $AND_CLI_facility_devices_user1_pwd$
    - Type: hide_keyboard
      Role: localiOS
    # Click on the Log In button.
    - Type: click
      Strategy: class_chain
      Id: $PAGE.seniors_app_login.login_btn$
    # Verify that the user has successfully logged in.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.snf_home.new_request_btn$

#Making a New Request with only the required data, and call to the provider.
#the first option on all dropdowns: patients, urgency and reasons.
#Requester name and lastname are filled with config variables: facility_devices_requester_name and facility_devices_requester_lastname
SNFNewRequestHelper:
  Roles:
    - Role: localiOS
      App: NeverAlone      
  Actions:
  #Verify that the button is visible
    - Type: wait_for
      Role: localiOS
      Strategy: xpath
      Id: $PAGE.snf_home.new_request_btn$
  #New request
    - Type: click
      Strategy: xpath
      Role: localiOS
      Id: $PAGE.snf_home.new_request_btn$
    - Type: wait_for
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.patient_information_title$
    - Type: send_keys
      Strategy: xpath
      Role: localiOS
      Id: $PAGE.snf_new_request_form.requester_first_name$
      Value: $AND_CLI_facility_devices_requester_name$
    - Type: send_keys
      Strategy: xpath
      Role: localiOS
      Id: $PAGE.snf_new_request_form.requester_last_name$
      Value: $AND_CLI_facility_devices_requester_lastname$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.patient_information_title$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.patient_name_select$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.first_patient_select_option$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.urgent_reason_dropdown$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.urgent_reason_dropdown$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.urgent_reason_option_no$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.reason_for_request_dropdown$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.reason_for_request_option_one$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
    - Type: return_element_attribute
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.patient_name_section$
      Attribute: label
      ResultVar: PATIENT_NAME_SNF
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.snf_new_request_form.submit_button$
  # Select "Yes, Call provider"
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.submit_options.yes_call_provider_button$
  # Verify that screen redirects to the call waiting room.
    - Type: wait_for
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.seniors_app_call.waiting_room_label$



# This helper creates a new request for your patient to make a call to a provider.
SNFCallProvider:
  Environment: Settings
  Roles:
    - Role: localiOS
      App: NeverAlone      
  Actions:
    # Create New request.
    - Type: click
      Strategy: xpath
      Id: $PAGE.snf_home.new_request_btn$
    - Type: wait_for
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.patient_information_title$
  # Submit button should be disabled until required data entered.
    - Type: wait_for_attribute
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.submit_button$
      Attribute: enabled
      Value: "false"
    - Type: send_keys
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.requester_first_name$
      Value: $AND_CLI_senior_user1_name$
    - Type: send_keys
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.requester_last_name$
      Value: $AND_CLI_senior_user1_lastname$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.patient_information_title$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.patient_name_select$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.patient_based_on_name$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.urgent_reason_dropdown$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.urgent_reason_dropdown$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.urgent_reason_option_no$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.reason_for_request_dropdown$
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.reason_for_request_option_one$
      Condition:
      - Value: 5
        Operation: visible
        Result: true
  # Submit button gets enabled.
    - Type: wait_for_attribute
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.submit_button$
      Attribute: enabled
      Value: "true"
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_new_request_form.submit_button$
  # Select "Yes, Call provider".
    - Type: click
      Strategy: class_chain
      Id: $PAGE.submit_options.yes_call_provider_button$
  # Verify that screen redirects to the call waiting room.
    - Type: wait_for
      Strategy: class_chain
      Id: $PAGE.seniors_app_call.waiting_room_label$