#CXTB-169 “Update password” Workflow in My account Modal
TestOnboarderCarePartnerUpdatePassword:
  Environment: Settings 
  Vars:
    LOGOUT_OPTION: "Stay On Shift"
    ENV_PASS_STORE: $AND_CLI_onboarder_user1_pwd$
  Roles:
    - Role: desktopChrome
      App: "desktop"
  Actions:
  #Calling Login case
    - Type: case
      Value: OnboarderCarePartnerLogin
  #Calling helper to update password
    - Type: set_env_var
      Value: $AND_CLI_onboarder_user1$
      Var: carepartner_user1
    - Type: set_env_var
      Value: $AND_CLI_onboarder_user1_pwd$
      Var: carepartner_user1_pwd
    - Type: case
      Value: CarePlatformUpdatePassword

#CXTB-164: Manually Log out of the Portal 
TestManuallyLogOutOfThePortalOnboarder:
  Environment: Settings 
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles: 
  - Role: desktopChrome
    App: "desktop"
  Actions:
  # Calling Login case
  - Type: case
    Value: OnboarderCarePartnerLogin
  # Click the name in upper right corner.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_header.user_dropdown_button$
  # Menu appears offering the following options:
  # My Account and Log out.
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_header.myaccount_menu_button$
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_header.logout_menu_button$
  # Click on the logout button.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_header.logout_menu_button$
  # Validate that the logout modal appears offering options relating to your status after logging out.
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.stay_on_shift_button$
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.go_off_shift_button$
  # Click on the cancel button.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.cancel_logout_button$
  # Repeat the steps from above and log out.
  - Type: case
    Value: CarePlatformLogout
  
# CXTB-161-Access Facilities Directory & Filter
TestOnboardersAccessFacilitiesDirectoryFilter:
   Environment: Settings
   Roles: 
   - Role: desktopChrome
     App: "desktop"
   Actions:
  # log in with my onboarder user
   - Type: case
     Value: OnboarderCarePartnerLogin
  # Click on the facilites button
   - Type: click
     Strategy: xpath
     Id: $PAGE.care_platform_facility.facilities_button$
  # Get the value to compare later
   - Type: get_text
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_darkened_letter_button$
     Greps:
        - var: FILTER_LETTER
          match: "(.*)"
  # Click the first darkened letter button
   - Type: click
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_darkened_letter_button$
  #Verify it was filtered by the selected letter
   - Type: get_text
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_senior_lastname$
     Greps:
        - var: FIRST_LETTER
          match: ^[a-zA-Z]   #The match selects: The first char from the starter word (^) that is a letter ([a-zA-Z])
   - Type: assert
     Asserts: 
     - Type: eq
       Var: FIRST_LETTER
       Value: $AND_CLI_FILTER_LETTER$
  #Remove the filter by letter
   - Type: click
     Strategy: xpath
     Id: $PAGE.care_platform_participant.selected_darkened_letter_button$
  #Get the first lastname in the list
   - Type: get_text
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_senior_lastname$
     Greps:
        - var: FIRST_facility_NO_FILTER
          match: (.*)
  #Add the search filter
   - Type: click
     Strategy: id
     Id: $PAGE.care_platform_facility.search_button$
   - Type: send_keys
     Strategy: id
     Id: $PAGE.care_platform_facility.search_text$
     Value: $AND_CLI_FIRST_facility_NO_FILTER$
  #Verify there is at least 1 user with that name
   - Type: wait_for
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_senior_lastname$
   - Type: get_text
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_senior_lastname$
     Greps:
        - var: FIRST_FACILITY
          match: (.*)
  #Verify the first participant lastname contains the text filtered
   - Type: assert
     Asserts: 
      - Type: contain
        Var: FIRST_FACILITY
        Value: $AND_CLI_FIRST_facility_NO_FILTER$
  #Clear the search by clicking small "x" at right of field
   - Type: click
     Strategy: xpath
     Id: $PAGE.care_platform_participant.clear_search_button$
  #Verify there is at least 1 user
   - Type: wait_for
     Strategy: xpath
     Id: $PAGE.care_platform_participant.first_senior_lastname$
  #Click on an user
   - Type: click
     Strategy: xpath
     Id: $PAGE.care_platform_participant.senior_1_row$
   - Type : wait_for
     Strategy: xpath
     Id: $PAGE.care_platform_facility.facility_name$

#CXTB-174 - Onboarders - Use “Forgot password” Link on Login Page  
TestOnboardersForgotPasswordLoginLink:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: "desktop"
  Actions:
    - Type: set_env_var
      Value: $AND_CLI_onboarder_user1$
      Var: carepartner_user1
    - Type: case
      Value: ForgotPasswordCarePlatformLoginLink
  
# CXTB-168: Access “My account” Window & Review “My info” Page
TestOnboardersAccessMyAcountWindowAndReviewMyInfo:
   Environment: Settings
   Roles: 
   - Role: desktopChrome
     App: "desktop"
   Actions:
  # Log in with my onboarder user.
   - Type: case
     Value: OnboarderCarePartnerLogin
  # Call case to access "My Account" Window and Review "My Info" Page.
   - Type: case
     Value: CarePlatformUpdateInfo

# CXTB-143: Access Participant Directory & Filter
TestOnboarderAccessParticipantDirectoryandFilter:
    Environment: Settings 
    Roles:
    - Role: desktopChrome
      App: "desktop"
    Actions:
  # Log in Care Platform as an Onboarder
    - Type: case
      Value: OnboarderCarePartnerLogin
  # Go to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
  # Get the value to compare later.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_darkened_letter_button$
      Greps:
        - var: LASTNAME_FILTER_LETTER
          match: "(.*)"
  # Click the first darkened letter button.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_darkened_letter_button$
  # Verify it was filtered by the selected letter.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
      Greps:
        - var: LASTNAME_FIRST_LETTER
          match: ^[a-zA-Z]  
    - Type: assert
      Asserts: 
      - Type: eq
        Var: LASTNAME_FIRST_LETTER
        Value: $AND_CLI_LASTNAME_FILTER_LETTER$
  # Remove the filter by clicking on the letter.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.selected_darkened_letter_button$
  # Get the first lastname in the list.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
      Greps:
        - var: LASTNAME_FIRST_PARTICIPANT_NO_FILTER
          match: (.*)
  # Add the search filter.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.search_button$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_participant.search_input$
      Value: $AND_CLI_LASTNAME_FIRST_PARTICIPANT_NO_FILTER$
  # Verify there is at least one participant with that name.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
      Greps:
        - var: LASTNAME_FIRST_PARTICIPANT
          match: (.*)
  # Verify the first participant lastname contains the text filtered.
    - Type: assert
      Asserts: 
      - Type: contain
        Var: LASTNAME_FIRST_PARTICIPANT
        Value: $AND_CLI_LASTNAME_FIRST_PARTICIPANT_NO_FILTER$
  # Clear the search by clicking small "x" on right of the field.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.clear_search_button$
  # Verify there is at least one participant.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
  # Click on a participant.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_1_row$
  # Verify that the info is showing after selecting the participant.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_1_row$
  # filter by status
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_options$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_options$
  # Verify that the info is showing after selecting the filter.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_1_row$
  # filter back to all
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_options$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.status_dropdown_options$      

# CXTB-145: Click and View Participant Record from Listing
TestOnboarderClickandViewParticipantRecordfromListing:
    Environment: Settings 
    Roles:
    - Role: desktopChrome
      App: "desktop"
    Actions:
  # Log in Care Platform as an Onboarder
    - Type: case
      Value: OnboarderCarePartnerLogin
  # Go to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
  # Click on a participant.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_1_row$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_1_row$
  # Click on Records Button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
  # Click to Medical Tab
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_tab$ 
  # Click on Medical Needs Subtab
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_medical_needs_subtab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_medical_needs_subtab$
      Greps:
        - var: SUBTAB_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: SUBTAB_CLASS
          Value: 'active'
  # Click on Behavioral Subtab
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_behavioral_subtab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_behavioral_subtab$
      Greps:
        - var: SUBTAB_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: SUBTAB_CLASS
          Value: 'active'
  # Click on Medical History Subtab
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_medical_history_subtab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.medical_medical_history_subtab$
      Greps:
        - var: SUBTAB_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: SUBTAB_CLASS
          Value: 'active'
          
# CTBX-162- Click and View Facility Device Record From Listing
TestOnboarderClickAndViewFacilitiesDevice:
    Environment: Settings
    Roles:
    - Role: desktopChrome
      App: "desktop"
    Actions:
    # login in onboarder Care Partner
    - Type: case
      Value: OnboarderCarePartnerLogin 
    # click in facilities button 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facilities_button$
    # click on the first listing record
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_lastname$
    # click on Overview button and verify if tab showing belongs to Overview
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.overview_button$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility.tabs_content$
      Greps:
      - var: TAB_CLASS
        attr: tab-title
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
      - Type: contain
        Var: TAB_CLASS
        Value: 'Overview'
    # click on Local Hospitals button and verify if tab showing belongs to Local Hospitals
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.local_hospitals_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility.title_subtab_local_hospital$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility.tabs_content$
      Greps:
      - var: TAB_CLASS
        attr: tab-title
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
      - Type: contain
        Var: TAB_CLASS
        Value: 'Local Hospitals'
    # click on Devices button and verify if tab showeing belogs to Devices
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.devices_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility.title_subtab_devices$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility.tabs_content$
      Greps:
      - var: TAB_CLASS
        attr: tab-title
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
      - Type: contain
        Var: TAB_CLASS
        Value: 'Devices'
    # Click on record button and check the Overview Tab
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.info_title$
    # Click on Devices button to see the facility device list
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.devices_button$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.device_status$
      Greps:
      - var: STATUS_CLASS
        attr: class
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
      - Type: contain
        Var: STATUS_CLASS 
        Value: 'active'

#CXTB-144-Onboarders-Create New Participant
TestOnboarderCreateNewParticipant:
    Environment: Settings
    Roles:
    - Role: desktopChrome
      App: "desktop"
    Actions:
  # login in onboarder Care Partner
    - Type: case
      Value: OnboarderCarePartnerLogin 
  # Go to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
  # click in Add button 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.add_participant_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.create_participant_title$
# Participant Information
  # Select a Call Center
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.call_center_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.call_center_option$
  # Select Account Status
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.account_status_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.account_status_option_active$
  # Select if it is a Test
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.is_test$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.is_test_options$
  # Add First Name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.firstname_input$
      Value: "Cesar"
  # Add Last name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.lastname_input$
      Value: "Moreno"
  # Add Preferred Name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.preferred_name_input$
      Value: "Wind"
  # Choose a Date of Birth
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.date_of_birth_picker$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.calendar_day$
  # Add a Gender
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.gender_input$
      Value: "N/A"
  # Select a Preferred Gender
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.preferred_gender_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.preferred_gender_option$
  # Add Mobile Phone number
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.phone_input$
      Value: "8286968565"
  # Add an Email Address
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.email_input$
      Value: "cemn@neural.com"
# Participant Insurance Informacion
  # Add Insurance Provider Name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_name_input$
      Value: "Alpha Healthcare Center"
  # Add Insurance Provider Phone Number
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_phone_number_input$
      Value: "5278412525"
  # Add Member ID 
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_member_id_input$
      Value: "120688CCD"
  # Add Group ID
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_group_id_input$
      Value: "00012"
  # Add Insurance Provider Address
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_input$
      Value: "W Town St"
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_numbers_input$
      Value: "424"
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_city_input$
      Value: "Columbus"
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_state_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_state_option$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.insurance_provider_address_zip_input$
      Value: "43215"
  # Choose a Race or Ethnicity
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.race_checkbox$
# Emergency Contact Information
   # Add First Name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_first_name_input$
      Value: "Laura"
  # Add Last name
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_last_name_input$
      Value: "Agatsuma"
  # Add Phone number
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_phone_number_input$
      Value: "8546859656"
  # Add an Email Address
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_email_input$
      Value: "lmentor@neural.com"
  # Select a relationship
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_relationship_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_relationship_options$
   # Add Insurance Provider Address
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_input$
      Value: "Linway Terrace"
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_numbers_input$
      Value: "6422"
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_city_input$
      Value: "McLean"
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_state_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_state_option$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.emergency_contact_address_zip_input$
      Value: "22101"
  # HIPAA Clearence Confirmation
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.hipaa_clearence_boolean$
  # Choose Social History
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.relationship_status_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.relationship_status_options$
  # Caregiver Support
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.caregiver_support_checkbox$
  # Advance Directive
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.advance_directive_checkbox$
  # Do Not Resiscitate
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.do_not_resuscitate_checkbox$
  # click on Create Participant Button 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_add_participant_form.create_participants_button$