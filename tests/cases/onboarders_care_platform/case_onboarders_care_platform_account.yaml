#CXTB-169 “Update password” Workflow in My account Modal
TestOnboarderCarePartnerUpdatePassword:
  Environment: Settings 
  Vars:
    LOGOUT_OPTION: "Stay On Shift"
    ENV_PASS_STORE: $AND_CLI_onboarder_user1_pwd$
  Roles:
    - Role: desktopChrome
      App: "desktop"
  Actions:
  #Calling Login case
    - Type: case
      Value: OnboarderCarePartnerLogin
  #Calling helper to update password
    - Type: set_env_var
      Value: $AND_CLI_onboarder_user1$
      Var: carepartner_user1
    - Type: set_env_var
      Value: $AND_CLI_onboarder_user1_pwd$
      Var: carepartner_user1_pwd
    - Type: case
      Value: CarePlatformUpdatePassword

#CXTB-164: Manually Log out of the Portal 
TestManuallyLogOutOfThePortalOnboarder:
  Environment: Settings 
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles: 
  - Role: desktopChrome
    App: "desktop"
  Actions:
  # Calling Login case
  - Type: case
    Value: OnboarderCarePartnerLogin
  # Click the name in upper right corner.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_header.user_dropdown_button$
  # Menu appears offering the following options:
  # My Account and Log out.
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_header.myaccount_menu_button$
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_header.logout_menu_button$
  # Click on the logout button.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_header.logout_menu_button$
  # Validate that the logout modal appears offering options relating to your status after logging out.
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.stay_on_shift_button$
  - Type: wait_for
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.go_off_shift_button$
  # Click on the cancel button.
  - Type: click
    Strategy: xpath
    Id: $PAGE.care_platform_logout_modal.cancel_logout_button$
  # Repeat the steps from above and log out.
  - Type: case
    Value: CarePlatformLogout

  # CXTB-254: Access Participant Directory & Filter
  TestOnboarderAccessParticipantDirectory&Filter:
    Environment: Settings 
    Roles:
    - Role: desktopChrome
      App: "desktop"
    Actions:
  # Calling Login case
    - Type: case
      Value: CarePartnerLogin
  # Go to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
  # Get the value to compare later.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_darkened_letter_button$
      Greps:
        - var: LASTNAME_FILTER_LETTER
          match: "(.*)"
  # Click the first darkened letter button.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_darkened_letter_button$
  # Verify it was filtered by the selected letter.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_in_list_strong$
      Greps:
        - var: LASTNAME_FIRST_LETTER
          match: ^[a-zA-Z]  
    - Type: assert
      Asserts: 
      - Type: eq
        Var: LASTNAME_FIRST_LETTER
        Value: $AND_CLI_LASTNAME_FILTER_LETTER$
  # Remove the filter by clicking on the letter.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.selected_darkened_letter_button$
  # Get the first lastname in the list.
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_in_list_strong$
      Greps:
        - var: LASTNAME_FIRST_PARTICIPANT_NO_FILTER
          match: (.*)
  # Add the search filter.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.search_button$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_participant.search_input$
      Value: $AND_CLI_LASTNAME_FIRST_PARTICIPANTS_NO_FILTER$
  # Verify there is at least one participant with that name.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_in_list_strong$
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_in_list_strong$
      Greps:
        - var: LASTNAME_FIRST_PARTICIPANT
          match: (.*)
  # Verify the first participant lastname contains the text filtered.
    - Type: assert
      Asserts: 
      - Type: contain
        Var: LASTNAME_FIRST_PARTICIPANT
        Value: $AND_CLI_LASTNAME_FIRST_PARTICIPANT_NO_FILTER$
  # Clear the search by clicking small "x" on right of the field.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.clear_search_button$
  # Verify there is at least one participant.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.first_senior_in_list_strong$
  # Click on a participant.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_4_row$
  # Verify that the info is showing after selecting the participant.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.employee_dob_label$
  