
# CXTB-185 Provider Can Click and View Facility Device Record from Listing
TestProviderCanClickAndViewFacilitiesDevice:
  Environment: Settings
  Vars:
    DEVICE_STATUS: "(Active|Pre-delivery|Suspended|Deactivated)"
  Roles:
    - Role: desktopChrome
      App: "desktop"
  Actions:
    # Login-in provider Care Partner
    - Type: case
      Value: ProvidersCarePlatformLogin
    # Click facilities button
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facilities_button$
    # click on the first listing record
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_based_on_name$
    # Click on Overview button and verify if tab showing belongs to Overview
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.overview_button$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.tabs_content$
      Greps:
      - var: TAB_CLASS
        attr: tab-title
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
      - Type: contain
        Var: TAB_CLASS
        Value: 'Overview'
    # Click on Local Hospital button and verify if tab showing belongs to Local Hospital
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.local_hospitals_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.title_subtab_local_hospital$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.tabs_content$
      Greps:
      - var: TAB_TITLE
        attr: tab-title
        condition: nempty
        match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: TAB_TITLE
          Value: 'Local Hospitals'
    # Click on Devices button and verify if tab showing belongs to Devices
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.devices_tab$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.title_subtab_devices$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.tabs_content$
      Greps:
        - var: TAB_TITLE
          attr: tab-title
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: TAB_TITLE
          Value: 'Devices'
    # Click on Record button and check the Devices
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.info_title$
    # Click to check Devices Tab
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.devices_tab$
    - Type: sleep
      Time: 2
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.device_status$
      Greps:
        - var: STATUS_TEXT
          condition: nempty
          match: "(Active|Pre-delivery|Suspended|Deactivated)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: DEVICE_STATUS
          Value: $AND_CLI_STATUS_TEXT$
  
# CXTB-186 Can Click and View Facility Device Call History & Access Call Recordings
TestProviderReviewFacilityDeviceCallHistoryAndAccessCallRecordings:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Precases:
    - MakeCallBetweenProviderAndSNF
  Aftercases:
    - CarePlatformLogout
  Roles:
    - Role: desktopChrome
      App: desktop
    - Role: localiOS
      App: NeverAlone
  Actions:
  # Log in with provider
    - Type: case
      Value: ProvidersCarePlatformLogin
  # Go to Facilities
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facilities_button$
  # click on the facility
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_based_on_name$
  # Go to Records
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
  # Click on Call History tab
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.call_history_tab$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.call_history_tab$
  # Call History listing
  # Expand row entry, check details
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.first_call_row$
      Time: 10
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.first_call_row$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.first_call_row$
      Greps:
        - var: CALL_IS_OPEN
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: CALL_IS_OPEN
          Value: 'is-open'
  # Check telehealth request form
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_facility_call_button$
    # Open Telehealth request Modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_facility_call_button$
      # Telehealth modal form
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_modal_title$
      # Patient subtitle
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_patient_information_subtitle$
      # Situation subtitle
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_situation_subtitle$
      # Assesment situation
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_assessment_subtitle$  
      # Close telehealth modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_close_button$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.telehealth_form_close_button$
  # Click play button on call recording, check you can pause it
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.play_pause_recording_button$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.play_pause_recording_button_status$
      Greps:
        - var: PLAY_RECORDING_STATUS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: PLAY_RECORDING_STATUS
          Value: '-paused'
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_history_page.play_pause_recording_button$

#CXTB-663 Review Info for Existing Facility Device - Facility Pane
TestProviderReviewInfoForExistingFacilityDeviceFacilityPane:
  Environment: Settings
  Roles: 
    - Role: desktopChrome
      App: "desktop"
  Actions:
  # Call to login case as a Provider.
    - Type: case
      Value: ProvidersCarePlatformLogin
  # Navigate to Facilities.
    - Type: case
      Value: ProviderNavigateToFacilities
  # Select a facility with an address and at least one device in listing.
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_based_on_name$
  # Right side of screen updates to show the selected facility’s summary pane including:
  # Facility’s local time, Overview, Local Hospitals, Devices
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_name$
  # Using Facility leadership page objects to avoid duplication.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.facility_local_time$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.overview_tab$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility.local_hospitals_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.devices_button$
  # Click "Devices" on right side.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.devices_button$
  # Right side of screen updates to show listing of facility’s device(s) and their current status.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.facility_status_label_elements$

# BUG: CHS-2603 TC: CXTB-669 Forced Assessment View on Calls for Follow-ups without Telehealth Request
TestProviderCheckForForcedAssessmentOnFollowUpsWithoutTelehealthRequest:
  Environment: Settings
  Roles: 
    - Role: desktopChrome
      App: desktop
    - Role: localiOS
      App: NeverAlone
  Precases:
    - ProviderNewCleaner
  Aftercases:
    - CleanUsedFollowUp
    - TerminateApp  
  Actions:
    #Call login for nurses
    - Type: case
      Role: localiOS
      Value: LoginSNFHelper
    #Clean SNF prompts
    - Type: case
      Role: localiOS
      Value: SeniorCleanPrompts
    #Clean any prompt notification from the start
    - Type: case
      Value: CreateAFollowUpForSNFCall
    # Skip the survey.
    - Type: wait_for
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.seniors_app_post_call_survey.skip_survey_button$
    - Type: click
      Strategy: class_chain
      Role: localiOS
      Id: $PAGE.seniors_app_post_call_survey.skip_survey_button$
    # Navigate again to home
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_home_page.home_button$
    - Type: wait_for
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_home_page.home_title$
    # Select a Follow-Up Call
    - Type: wait_for
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_home_page.follow_up_calls$
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_home_page.follow_up_calls$
    - Type: sleep
      Role: desktopChrome
      Time: 1
    # Looking for Assessment Tab, it shouldn't be
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.providers_follow_up_call_details_page.nav_tab$
      Role: desktopChrome
      Greps:
        - var: FOLLOW_UP_TABS
          attr: innerHTML
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: FOLLOW_UP_TABS
          Value: 'Assessment'
    # Call back to the device
    - Type: wait_for
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_follow_up_call_details_page.call_device_button$
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_follow_up_call_details_page.call_device_button$
    # Check you are in the call portal
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.end_call_btn$
    # Check there's no Assessment here neither
    - Type: get_attribute
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_follow_up_call_details_page.nav_tab$
      Greps:
        - var: FOLLOW_UP_TAB_CALL_PORTAL
          attr: innerHTML
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: FOLLOW_UP_TAB_CALL_PORTAL
          Value: 'Assessment'
    # End the call
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_call_handling_page.end_call_btn$
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.providers_call_handling_page.no_message_button$

# CXTB-725 Review Info for Existing Facility Device - Facility Profile
TestProviderReviewInfoForExistingFacilityDeviceFacilityProfile:
  Environment: Settings
  Vars:
    DEVICE_STATUS: "(Active|Pre-delivery|Suspended|Deactivated)"
    LOGOUT_OPTION: "Go Off Shift"
  Aftercases:
    - CarePlatformLogout
  Roles: 
    - Role: desktopChrome
      App: desktop
  Actions:
  # Call to login case as a Provider.
    - Type: case
      Value: ProvidersCarePlatformLogin
  # Navigate to Facilities.
    - Type: case
      Value: ProviderNavigateToFacilities
  # Select a facility with an address and at least one device in listing.
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_based_on_name$
  # Right side of screen updates to show the selected facility’s summary pane including:
  # Facility’s local time, Overview, Local Hospitals, Devices
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_name$
  # Using Facility leadership page objects to avoid duplication.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.facility_local_time$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.overview_tab$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility.local_hospitals_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.devices_button$
  # Click "Devices" on right side.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.devices_button$
  # Right side of screen updates to show listing of facility’s device(s) and their current status.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility_Record.facility_status_label_elements$
  # Click on Record
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.info_title$
  # Click to check Devices Tab
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.devices_tab$
    - Type: sleep
      Time: 2
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.providers_facilities_records_page.device_status$
      Greps:
        - var: STATUS_TEXT
          condition: nempty
          match: "(Active|Pre-delivery|Suspended|Deactivated)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: DEVICE_STATUS
          Value: $AND_CLI_STATUS_TEXT$

#CXTB-184 Access Facilities Directory & Filter
TestProviderAccessFacilitiesDirectoryAndFilter:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Aftercases:
    - CarePlatformLogout
  Roles: 
    - Role: desktopChrome
      App: desktop
  Actions:
  # Call to login
    - Type: case
      Value: ProvidersCarePlatformLogin
  # Click on "Facilities" in header of the Care Platform
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.facility_leadership_care_platform_home.facilities_header_tab$
    - Type: click
      Strategy: xpath
      Id: $PAGE.facility_leadership_care_platform_home.facilities_header_tab$
  # Click on a letter along right side of listing
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facility_first_active_letter$
  # Get the value to compare later
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facility_first_active_letter$
      Greps:
        - var: FILTER_LETTER
          match: "(.*)"
  #Verify is selected
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facility_first_active_letter$
      Greps:
        - var: SELECTED_CLASS
          attr: class
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: SELECTED_CLASS
          Value: 'is-selected'
  #Verify it was filtered by the selected letter
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
      Greps:
        - var: FIRST_LETTER
          match: ^[a-zA-Z]   #The match selects: The first char from the starter word (^) that is a letter ([a-zA-Z])
    - Type: assert
      Asserts: 
        - Type: eq
          Var: FIRST_LETTER
          Value: $AND_CLI_FILTER_LETTER$
  #Remove the filter by letter
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facility_first_active_letter$
  #Check is not selected anymore
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_facility.facility_first_active_letter$
      Greps:
        - var: NOT_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
  #Get the first facility in the list
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
      Greps:
        - var: FIRST_FACILITY_NO_FILTER
          match: (.*)
  #Add the search filter
    - Type: click
      Strategy: id
      Id: $PAGE.facility_leadership_facilities_listing.search_button$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.facility_leadership_facilities_listing.search_text$
      Value: $AND_CLI_FIRST_FACILITY_NO_FILTER$
  #Verify there is at least 1 facility with that name
    - Type: set_env_var
      Value: $AND_CLI_FIRST_FACILITY_NO_FILTER$
      Var: facility_name1
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.facility_leadership_facilities_listing.facility_based_on_name$
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
      Greps:
        - var: FIRST_FACILITY
          match: (.*)
  #Verify the first facility contains the text filtered
    - Type: assert
      Asserts: 
        - Type: contain
          Var: FIRST_FACILITY
          Value: $AND_CLI_FIRST_FACILITY_NO_FILTER$
  #Clear the search by clicking small "x" at right of field
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.clear_search_button$
  #Verify there is at least 1 facility
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
  #Get name of facility
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
      Greps:
        - var: FIRST_FACILITY_NAME
          condition: nempty
          match: "(.*)"
  #Click on a facility
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_facility.first_facility$
  #Check facility details
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_name$
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.providers_facilities_page.facility_name$
      Greps:
        - var: FACILITY_NAME_TITLE
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: FIRST_FACILITY_NAME
          Value: $AND_CLI_FACILITY_NAME_TITLE$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.facility_local_time$
    # Check Overview is selected
    - Type: click
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.overview_tab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.overview_tab$
      Greps:
        - var: OVERVIEW_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: OVERVIEW_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.local_hospitals_tab$
      Greps:
        - var: LOCAL_HOSPITALS_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: LOCAL_HOSPITALS_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.devices_tab$
      Greps:
        - var: DEVICES_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: DEVICES_SELECTED_CLASS
          Value: 'active'
    # Check Local Hospitals tab is selected
    - Type: click
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.local_hospitals_tab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.overview_tab$
      Greps:
        - var: OVERVIEW_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: OVERVIEW_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.local_hospitals_tab$
      Greps:
        - var: LOCAL_HOSPITALS_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: LOCAL_HOSPITALS_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.devices_tab$
      Greps:
        - var: DEVICES_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: DEVICES_SELECTED_CLASS
          Value: 'active'
    # Check Devices tabs is selected
    - Type: click
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.devices_tab$
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.overview_tab$
      Greps:
        - var: OVERVIEW_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: OVERVIEW_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.local_hospitals_tab$
      Greps:
        - var: LOCAL_HOSPITALS_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: n_contain
          Var: LOCAL_HOSPITALS_SELECTED_CLASS
          Value: 'active'
    - Type: get_attribute
      Strategy: xpath
      Id: $PAGE.facility_leadership_facility_details.devices_tab$
      Greps:
        - var: DEVICES_SELECTED_CLASS
          attr: class
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: DEVICES_SELECTED_CLASS
          Value: 'active'

# CXTB-748 Attempt an On-Demand Call to Facility’s Device (that is Missed) - Facility Pane
TestProviderAttemptAnOnDemandCallToFacilitysDeviceThatIsMissedFacilityPane:
  Environment: Settings
  Roles: 
    - Role: localiOS
      Capabilities:
        newCommandTimeout: 120
      App: NeverAlone
    - Role: desktopChrome
      App: desktop
  Precases:
    - ProviderNewCleaner
  Aftercases:
    - TerminateApp
  Actions:
  # Setup for the test data
  #Call login for nurses
    - Type: case
      Role: localiOS
      Value: LoginSNFHelper
  #Calling Prompt cleaner
    - Type: case
      Role: localiOS
      Value: SeniorCleanPrompts
  # Call as a Provider
    - Type: case
      Value: ProviderCallFacility
  # On SNF wait for the incoming call
  # Nurse sees that there is an incoming call.
    - Type: sleep
      Time: 2
    - Type: wait_for
      Strategy: class_chain
      Id: $PAGE.snf_incoming_call.incoming_call_header$
      CheckTime: 20
  # Sleep for a minute
    - Type: sleep
      Time: 61
  # Click the "End Call" button.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.end_call_btn$
      Role: desktopChrome
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.end_call_btn$
      Role: desktopChrome
  # Provider select No Message
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.no_message_button$
      Role: desktopChrome
    - Type: click
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.no_message_button$
      Role: desktopChrome
  # In SNF there's a missed call
    - Type: wait_for
      Strategy: class_chain
      Id: $PAGE.snf_notifications.missed_incoming_call_modal_title$
      Role: localiOS
    - Type: click
      Strategy: class_chain
      Id: $PAGE.snf_notifications.modal_close_button$
      Role: localiOS